document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".syde-user-api-table tbody");if(!e||0===e.children.length)return void console.warn("User table is empty. Skipping initialization.");const t=new Map;document.body.addEventListener("click",(e=>{const n=e.target.closest(".user-row");if(!n)return;"A"===e.target.tagName&&e.preventDefault();const o=n.dataset.userId,r=document.getElementById(`user-details-${o}`),a=r?.querySelector(".user-details-content");if(r&&a)if("table-row"!==r.style.display){if(t.has(o))return a.innerHTML=t.get(o),void(r.style.display="table-row");a.textContent="Loading user details...",r.style.display="table-row",fetch(UserDirectory.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"fetch_user_details",id:o})}).then((e=>e.text())).then((e=>{e.includes("User not found")?a.textContent="No details found.":(t.set(o,e),a.innerHTML=e)})).catch((e=>{a.textContent="Error loading details.",console.error(e)}))}else r.style.display="none"}))}));